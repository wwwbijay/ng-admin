<um-nav></um-nav>

<div *ngIf="_router.url === '/user-management'" class="horroscope-dashboard">
  <div class="page-item">
    <div class="page-entry-heading">
      <h3>All Users</h3>
      <a
        class="btn btn-primary"
        data-toggle="modal"
        data-target="#addUserModal"
      >
        + Add User</a
      >
    </div>
    <!--.page-entry-heading ends-->

    <div class="page-item-entry text-center">
      <!-- Data Tables START -->
      <table class="table table-striped table-mid-content table-bordered">
        <thead>
          <tr>
            <th scope="col" width="10%">S.No.</th>

            <th scope="col" width="20%">Full Name</th>
            <th scope="col" width="10%">Username</th>
            <th scope="col" width="10%">Phone</th>
            <th scope="col" width="10%">Email</th>
            <th scope="col" width="10%">Role</th>
            <th scope="col" width="20%">Action</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let user of allUsers; let i = index">
            <td>{{ i + 1 }}</td>
            <td>{{ user.fullName }}</td>
            <td>{{ user.userName }}</td>
            <td>{{ user.phoneNumber }}</td>
            <td>{{ user.email }}</td>
            <td>{{ user.roles }}</td>
            <td>
              <a
                class="btn btn-icon btn-icon-edit"
                data-toggle="modal"
                data-target="#editSignModal"
              >
                <span class="material-icons"> edit </span>
              </a>
              <a
                class="btn btn-icon btn-icon-view"
                data-toggle="modal"
                data-target="#modal"
              >
                <span class="material-icons"> delete </span>
              </a>
            </td>
          </tr>
        </tbody>
      </table>
      <!-- Data Tables END -->
    </div>
    <!--.page-entry-heading ends-->
  </div>
  <!--.page-item END-->
</div>

<router-outlet></router-outlet>

<!-- Modal Add new user START-->
<div
  class="modal fade"
  id="addUserModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="addUserModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <form [formGroup]="createUserForm" (ngSubmit)="createUser()">
        <div class="modal-header">
          <h5 class="modal-title" id="addUserModalLabel">Create New User</h5>
          <button
            type="button"
            class="close"
            data-dismiss="modal"
            aria-label="Close"
          >
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div *ngIf="submitted" class="submitted">
          <div class="alert text-center"  [ngClass]="(submitted_success) ? 'alert-success': 'alert-danger'" role="alert">
              <p>
                {{submitted_msg}}
              </p>
          </div>
      </div>
        <div class="modal-body">
          <div class="form-section-heading">
            <h4 class="title">General Information</h4>
          </div>
          <div class="row">
            <div class="col">
              <div class="form-group">
                <span class="material-icons"> person </span>
                <input
                  id="fullname"
                  type="text"
                  class="form-control"
                  name="fullname"
                  placeholder="Full Name"
                  formControlName="fullname"
                />
                <small
                  *ngIf="fullName && fullName.invalid && fullName.touched"
                  class="err_msg"
                >
                  Please enter full name.
                </small>
              </div>
            </div>
          </div>
          <!--.row ends-->

          <div class="row">
            <div class="col">
              <div class="form-group">
                <span class="material-icons"> lock </span>
                <input
                  id="password"
                  type="password"
                  class="form-control"
                  name="password"
                  placeholder="Password"
                  formControlName="password"
                />
                <small
                  *ngIf="password && password.invalid && password.touched"
                  class="err_msg"
                >
                  Please enter valid password.
                </small>
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <span class="material-icons"> lock </span>
                <input
                  id="confirmPassword"
                  type="password"
                  class="form-control"
                  name="confirmPassword"
                  placeholder="Confirm Password"
                  formControlName="confirmPassword"
                />
                <small
                  *ngIf="confirmPassword && confirmPassword.invalid && confirmPassword.touched"
                  class="err_msg"
                >
                Please enter valid password.
                </small>
              </div>
            </div>
          </div>
          <!--.row ends-->

          <div class="row">
            <div class="col">
              <div class="form-group">
                <span class="material-icons"> email </span>
                <input
                  id="email"
                  type="email"
                  class="form-control"
                  name="email"
                  placeholder="Email Address"
                  formControlName="email"
                />
                <small
                  *ngIf="email && email.invalid && email.touched"
                  class="err_msg"
                >
                  Please enter valid email.
                </small>
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <span class="material-icons"> person </span>
                <input
                  id="username"
                  type="text"
                  class="form-control"
                  name="username"
                  placeholder="User Name"
                  formControlName="username"
                />
                <small
                  *ngIf="username && username.invalid && username.touched"
                  class="err_msg"
                >
                  Minimum length of username should be 8.
                </small>
              </div>
            </div>
          </div>
          <!--.row ends-->



          <div class="row">
            <div class="col">
              <div class="form-group">
                <span class="material-icons"> phone_iphone </span>
                <input
                  class="form-control"
                  type="text"
                  id="mobile"
                  name="mobile"
                  placeholder="Mobile Number"
                  formControlName="mobile"
                />
                <small
                  *ngIf="mobile && mobile.invalid && mobile.touched"
                  class="err_msg"
                >
                  Please enter valid email.
                </small>
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <span class="material-icons"> call </span>
                <input
                  class="form-control"
                  type="text"
                  id="phone"
                  name="phone"
                  placeholder="Phone Number"
                  formControlName="phone"
                />
              </div>
            </div>
          </div>
          <!--.row ends-->

          <div class="row">
            <div class="col">
              <div class="form-group">
                <label>DOB</label>
                <span class="material-icons"> date </span>

                <input
                  class="form-control"
                  type="date"
                  id="dob"
                  name="dob"
                  placeholder="Date of Birth"
                  formControlName="dob"
                />
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <label>Select Gender</label>
                <select
                  name="gender"
                  class="form-control"
                  formControlName="gender"
                >
                  <option value="none" selected>Select Gender</option>
                  <option value="male">Male</option>
                  <option value="female">Female</option>
                </select>
              </div>
            </div>
          </div>
          <!--.row ends-->

          <div class="form-section-heading">
            <h4 class="title">Assign Role</h4>
          </div>

          <div class="row">
            <div class="col">
              <div class="form-group">
                <label>Select roles</label>

                
                 <div *ngFor="let role of allRoleLists; let i=index" class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="role-option-{{i}}"
                    [(ngModel)]="role.isselected"
                    [ngModelOptions]="{standalone: true}"
                  />
                  
                  <label class="form-check-label" for="role-option-{{i}}"> {{role.name}} </label>
                  
                </div> 
                
              </div>
            </div>
            <div class="col"></div>
          </div>
          <!--.row ends-->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">
            Close
          </button>
          <button
            [disabled]="createUserForm.invalid"
            type="submit"
            class="btn btn-primary"
          >
            Add User
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
<!-- Modal Add new user END-->
